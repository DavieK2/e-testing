import{S as it,i as rt,s as at,c as B,g as E,m as M,j as ne,t as k,a as w,l as oe,d as W,b as ut,o as ct,f as q,h,k as c,C as Qe,n as _e,q as pt,p as ft,e as dt,E as Re,r as He,y as ge,B as be,v as mt}from"./app-6d9f305e.js";import qe from"./button-8a7fdb21.js";import Ke from"./icons-c5a046aa.js";import gt from"./slide_panel-2bd9836d.js";import{L as bt}from"./Layout-2cfd6595.js";import ht from"./EditableQuestionCard-ad1f884f.js";import Ne from"./question_bank-aa997a87.js";import Ie from"./assessment_questions-1790d1eb.js";import _t from"./assigned_questions-edfe66f7.js";import qt from"./CsvImportCard-44751b91.js";import kt from"./ImportMappingCard-fe510981.js";import{r as F}from"./util-f704b04e.js";import{i as Ye}from"./link-7d7fab16.js";import es from"./select-5f1b2e78.js";import Ge from"./modal-f0199d0f.js";import Te from"./input-694295df.js";import{h as St}from"./moment-55cb88ed.js";import"./utils-4fba9a6a.js";import"./tw-merge-0f2443f8.js";import"./utils-27538abd.js";import"./index-000d58f7.js";import"./TextEditor-45bc4bcb.js";import"./QuestionCard-23157eeb.js";function wt(t){let n,s,o,l,i,f,r,p,d,m,S,Q,g,I,y,C,O,A,z,H,le,D,x,_,J,U,Y,ie,V,R,ee,ce,se,G,pe,te,b,he,re,L,fe,$,P,de,ke;i=new Ke({props:{icon:"chevron_right",className:"h-4 w-4 fill-gray-700"}}),m=new Ke({props:{icon:"chevron_right",className:"h-4 w-4 fill-gray-700"}}),R=new qe({props:{buttonText:"Add Section",className:"min-w-max text-sm bg-green-600 hover:bg-green-500 focus:bg-green-600 focus:ring-green-300 py-3"}}),R.$on("click",t[55]);var X=t[2];function K(a,v){return{props:{questions:a[28],questionBank:a[31],questionCurrentPageNumber:a[14],questionLastPageNumber:a[35],classes:a[24],assessmentCategories:a[22],sessions:a[25],terms:a[26],assessmentTypes:a[20],subjects:a[23],sections:a[15],assessmentQuestionBanks:a[30]}}}return X&&(b=Re(X,K(t)),b.$on("mass-assign",t[86]),b.$on("load-more-question-bank",t[62]),b.$on("load-more-questions",t[61]),b.$on("edit",t[87]),b.$on("assign",t[88]),b.$on("get-question-bank",t[89]),b.$on("select-question",t[90]),b.$on("deselect-question",t[91]),b.$on("check-all",t[92])),$=new _t({props:{assignedQuestions:t[0],sections:t[18]}}),$.$on("mass-unassign",t[93]),$.$on("edit",t[94]),$.$on("unassign",t[95]),$.$on("download-excel",t[53]),$.$on("select-question",t[96]),$.$on("deselect-question",t[97]),$.$on("check-all",t[98]),{c(){n=q("div"),s=q("div"),o=q("a"),o.textContent="Assessments",l=E(),B(i.$$.fragment),f=E(),r=q("a"),p=_e(t[37]),d=E(),B(m.$$.fragment),S=E(),Q=q("span"),Q.textContent=`${t[40]} ( ${t[41]} )`,g=E(),I=q("div"),y=q("div"),C=q("div"),O=q("div"),A=q("button"),z=_e("Questions"),le=E(),D=q("button"),x=_e("Question Archive"),J=E(),U=q("div"),Y=q("h3"),Y.textContent="Assigned Questions",ie=E(),V=q("div"),B(R.$$.fragment),ee=E(),ce=q("div"),se=q("div"),G=q("div"),G.innerHTML='<div class="container h-[30rem]"><div class="flex items-center text-center rounded-lg h-full dark:border-gray-700"><div class="flex flex-col w-full max-w-sm px-4 mx-auto"><div class="p-3 mx-auto text-blue-500 bg-blue-100 rounded-full dark:bg-gray-800"><svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6"><path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path></svg></div> <h1 class="mt-3 text-lg text-gray-800 dark:text-white">No questions found</h1> <p class="mt-2 text-gray-500 dark:text-gray-400">There aren&#39;t any available questions.</p></div></div></div>',pe=E(),te=q("div"),b&&B(b.$$.fragment),he=E(),re=q("div"),L=q("div"),fe=q("div"),B($.$$.fragment),h(o,"href","/assessments"),h(o,"class","text-sm font-bold text-gray-700 capitalize"),h(r,"href",`/assessments/termly/manage/${t[36]}`),h(r,"class","text-sm font-bold text-gray-700 capitalize"),h(Q,"class","text-sm font-bold text-gray-700 capitalize"),h(s,"class","flex space-x-3 items-center py-4"),h(n,"class","fixed flex items-center h-16 justify-between bg-white py-4 container border-b w-[calc(100vw-15rem)] z-50"),h(A,"type","button"),h(A,"class",H=`text-sm font-semibold py-2 px-8 ${t[2]!=Ie?"text-gray-400 bg-gray-100":"text-gray-600 border-2 border-gray-500"} rounded-s-lg transition w-full`),h(D,"type","button"),h(D,"class",_=`text-sm font-semibold py-2 px-8 ${t[2]!=Ne?"text-gray-400 bg-gray-100":"text-gray-600 border-2 border-gray-500"} rounded-e-lg transition w-full`),h(O,"class","flex items-center justify-center h-full"),h(C,"class","px-8 w-[35rem] shrink-0 border-r border-gray-100 h-full"),h(Y,"class","text-gray-800 text-lg font-bold min-w-max"),h(V,"class","flex items-center space-x-2"),h(U,"class","px-8 py-4 min-w-[36rem] flex items-center justify-between w-full"),h(y,"class","fixed mt-16 w-[calc(100vw-15rem)] z-30 flex border-b border-gray-100 items-center h-16 bg-white"),h(G,"class","absolute inset-0 bg-white"),h(te,"class","absolute z-50 bg-white w-full"),h(se,"class","relative flex flex-col h-full"),h(ce,"class","fixed w-[35rem] bg-white border-r border-gray-100 bottom-0 h-[calc(100vh-12rem)] overflow-y-auto"),h(fe,"class","pb-52 max-w-lg"),h(L,"class","relative flex flex-col h-full"),h(re,"class","fixed bottom-0 h-[calc(100vh-12rem)] ml-[35rem] w-full bg-white overflow-auto"),h(I,"class","relative overflow-x-auto")},m(a,v){ne(a,n,v),c(n,s),c(s,o),c(s,l),M(i,s,null),c(s,f),c(s,r),c(r,p),c(s,d),M(m,s,null),c(s,S),c(s,Q),ne(a,g,v),ne(a,I,v),c(I,y),c(y,C),c(C,O),c(O,A),c(A,z),c(O,le),c(O,D),c(D,x),c(y,J),c(y,U),c(U,Y),c(U,ie),c(U,V),M(R,V,null),c(I,ee),c(I,ce),c(ce,se),c(se,G),c(se,pe),c(se,te),b&&M(b,te,null),c(I,he),c(I,re),c(re,L),c(L,fe),M($,fe,null),P=!0,de||(ke=[He(Ye.call(null,o)),He(Ye.call(null,r)),Qe(A,"click",t[84]),Qe(D,"click",t[85])],de=!0)},p(a,v){if((!P||v[0]&4&&H!==(H=`text-sm font-semibold py-2 px-8 ${a[2]!=Ie?"text-gray-400 bg-gray-100":"text-gray-600 border-2 border-gray-500"} rounded-s-lg transition w-full`))&&h(A,"class",H),(!P||v[0]&4&&_!==(_=`text-sm font-semibold py-2 px-8 ${a[2]!=Ne?"text-gray-400 bg-gray-100":"text-gray-600 border-2 border-gray-500"} rounded-e-lg transition w-full`))&&h(D,"class",_),v[0]&4&&X!==(X=a[2])){if(b){ge();const j=b;w(j.$$.fragment,1,0,()=>{W(j,1)}),be()}X?(b=Re(X,K(a)),b.$on("mass-assign",a[86]),b.$on("load-more-question-bank",a[62]),b.$on("load-more-questions",a[61]),b.$on("edit",a[87]),b.$on("assign",a[88]),b.$on("get-question-bank",a[89]),b.$on("select-question",a[90]),b.$on("deselect-question",a[91]),b.$on("check-all",a[92]),B(b.$$.fragment),k(b.$$.fragment,1),M(b,te,null)):b=null}else if(X){const j={};v[0]&268435456&&(j.questions=a[28]),v[1]&1&&(j.questionBank=a[31]),v[0]&16384&&(j.questionCurrentPageNumber=a[14]),v[0]&16777216&&(j.classes=a[24]),v[0]&4194304&&(j.assessmentCategories=a[22]),v[0]&33554432&&(j.sessions=a[25]),v[0]&67108864&&(j.terms=a[26]),v[0]&1048576&&(j.assessmentTypes=a[20]),v[0]&8388608&&(j.subjects=a[23]),v[0]&32768&&(j.sections=a[15]),v[0]&1073741824&&(j.assessmentQuestionBanks=a[30]),b.$set(j)}const Z={};v[0]&1&&(Z.assignedQuestions=a[0]),v[0]&262144&&(Z.sections=a[18]),$.$set(Z)},i(a){P||(k(i.$$.fragment,a),k(m.$$.fragment,a),k(R.$$.fragment,a),b&&k(b.$$.fragment,a),k($.$$.fragment,a),P=!0)},o(a){w(i.$$.fragment,a),w(m.$$.fragment,a),w(R.$$.fragment,a),b&&w(b.$$.fragment,a),w($.$$.fragment,a),P=!1},d(a){a&&(oe(n),oe(g),oe(I)),W(i),W(m),W(R),b&&W(b),W($),de=!1,mt(ke)}}}function Ve(t){let n,s;return n=new ht({props:{questionId:t[1].questionId,edit:t[8],create:t[9],topics:t[19],disabled:t[10],questionEdit:t[13],subjectId:t[38],classId:t[39],assigned:t[1].assigned,sections:t[17],questionBankId:t[1].questionBankId,question:t[1].question,correctAnswer:t[1].correctAnswer,options:t[1].options,questionScore:t[1].questionScore,questionType:t[1].questionType,selectedSection:t[1].sectionId,selectedTopic:t[1].topicId,source:t[1].source,className:"w-[40rem]"}}),n.$on("saving",t[66]),n.$on("error",t[67]),n.$on("cancel",t[45]),n.$on("updated",t[68]),n.$on("saved",t[69]),{c(){B(n.$$.fragment)},m(o,l){M(n,o,l),s=!0},p(o,l){const i={};l[0]&2&&(i.questionId=o[1].questionId),l[0]&256&&(i.edit=o[8]),l[0]&512&&(i.create=o[9]),l[0]&524288&&(i.topics=o[19]),l[0]&1024&&(i.disabled=o[10]),l[0]&8192&&(i.questionEdit=o[13]),l[0]&2&&(i.assigned=o[1].assigned),l[0]&131072&&(i.sections=o[17]),l[0]&2&&(i.questionBankId=o[1].questionBankId),l[0]&2&&(i.question=o[1].question),l[0]&2&&(i.correctAnswer=o[1].correctAnswer),l[0]&2&&(i.options=o[1].options),l[0]&2&&(i.questionScore=o[1].questionScore),l[0]&2&&(i.questionType=o[1].questionType),l[0]&2&&(i.selectedSection=o[1].sectionId),l[0]&2&&(i.selectedTopic=o[1].topicId),l[0]&2&&(i.source=o[1].source),n.$set(i)},i(o){s||(k(n.$$.fragment,o),s=!0)},o(o){w(n.$$.fragment,o),s=!1},d(o){W(n,o)}}}function Xe(t){let n,s,o={disabled:t[10]};return n=new qt({props:o}),t[70](n),n.$on("on-upload",t[58]),{c(){B(n.$$.fragment)},m(l,i){M(n,l,i),s=!0},p(l,i){const f={};i[0]&1024&&(f.disabled=l[10]),n.$set(f)},i(l){s||(k(n.$$.fragment,l),s=!0)},o(l){w(n.$$.fragment,l),s=!1},d(l){t[70](null),W(n,l)}}}function Ze(t){let n,s;return n=new kt({props:{sections:t[16],disabled:t[10],headings:t[32],options:t[34]()}}),n.$on("deselected",t[71]),n.$on("selected",t[72]),n.$on("import",t[59]),n.$on("back-button",t[73]),n.$on("question-type",t[74]),n.$on("de-question-type",t[75]),n.$on("section",t[76]),n.$on("de-section",t[77]),{c(){B(n.$$.fragment)},m(o,l){M(n,o,l),s=!0},p(o,l){const i={};l[0]&65536&&(i.sections=o[16]),l[0]&1024&&(i.disabled=o[10]),l[1]&2&&(i.headings=o[32]),l[1]&8&&(i.options=o[34]()),n.$set(i)},i(o){s||(k(n.$$.fragment,o),s=!0)},o(o){w(n.$$.fragment,o),s=!1},d(o){W(n,o)}}}function xe(t){let n,s,o,l,i,f,r,p,d,m,S,Q,g,I,y,C,O,A,z,H;o=new Te({props:{value:t[33].sectionTitle,label:"Enter Section Title",labelStyle:"font-semibold"}}),o.$on("input",t[78]),f=new es({props:{value:t[33].questionType,options:t[21],className:"text-sm",optionsStyling:"text-sm",placeholder:"Select Question Type",label:"Select Question Type",labelStyle:"font-semibold"}}),f.$on("selected",t[79]),f.$on("deselected",t[80]),d=new Te({props:{value:t[33].sectionDescription,label:"Enter Section Description",labelStyle:"font-semibold"}}),d.$on("input",t[81]),Q=new Te({props:{type:"number",value:t[33].sectionTotalQuestions,label:"Enter Total Questions",labelStyle:"font-semibold"}}),Q.$on("input",t[82]),y=new Te({props:{type:"number",value:t[33].sectionScore,label:"Enter Section Score",labelStyle:"font-semibold"}}),y.$on("input",t[83]);const le=[Tt,$t],D=[];function x(_,J){return _[4]==_[4].editSection?0:1}return A=x(t),z=D[A]=le[A](t),{c(){n=q("div"),s=q("div"),B(o.$$.fragment),l=E(),i=q("div"),B(f.$$.fragment),r=E(),p=q("div"),B(d.$$.fragment),m=E(),S=q("div"),B(Q.$$.fragment),g=E(),I=q("div"),B(y.$$.fragment),C=E(),O=q("div"),z.c(),h(O,"class","w-20"),h(n,"class","flex flex-col space-y-6 p-3 w-[32rem]")},m(_,J){ne(_,n,J),c(n,s),M(o,s,null),c(n,l),c(n,i),M(f,i,null),c(n,r),c(n,p),M(d,p,null),c(n,m),c(n,S),M(Q,S,null),c(n,g),c(n,I),M(y,I,null),c(n,C),c(n,O),D[A].m(O,null),H=!0},p(_,J){const U={};J[1]&4&&(U.value=_[33].sectionTitle),o.$set(U);const Y={};J[1]&4&&(Y.value=_[33].questionType),J[0]&2097152&&(Y.options=_[21]),f.$set(Y);const ie={};J[1]&4&&(ie.value=_[33].sectionDescription),d.$set(ie);const V={};J[1]&4&&(V.value=_[33].sectionTotalQuestions),Q.$set(V);const R={};J[1]&4&&(R.value=_[33].sectionScore),y.$set(R);let ee=A;A=x(_),A===ee?D[A].p(_,J):(ge(),w(D[ee],1,1,()=>{D[ee]=null}),be(),z=D[A],z?z.p(_,J):(z=D[A]=le[A](_),z.c()),k(z,1),z.m(O,null))},i(_){H||(k(o.$$.fragment,_),k(f.$$.fragment,_),k(d.$$.fragment,_),k(Q.$$.fragment,_),k(y.$$.fragment,_),k(z),H=!0)},o(_){w(o.$$.fragment,_),w(f.$$.fragment,_),w(d.$$.fragment,_),w(Q.$$.fragment,_),w(y.$$.fragment,_),w(z),H=!1},d(_){_&&oe(n),W(o),W(f),W(d),W(Q),W(y),D[A].d()}}}function $t(t){let n,s;return n=new qe({props:{disabled:t[10],buttonText:"Add Section",className:"min-w-max max-w-min"}}),n.$on("click",t[63]),{c(){B(n.$$.fragment)},m(o,l){M(n,o,l),s=!0},p(o,l){const i={};l[0]&1024&&(i.disabled=o[10]),n.$set(i)},i(o){s||(k(n.$$.fragment,o),s=!0)},o(o){w(n.$$.fragment,o),s=!1},d(o){W(n,o)}}}function Tt(t){let n,s;return n=new qe({props:{disabled:t[10],buttonText:"Update",className:"min-w-max max-w-min"}}),n.$on("click",t[64]),{c(){B(n.$$.fragment)},m(o,l){M(n,o,l),s=!0},p(o,l){const i={};l[0]&1024&&(i.disabled=o[10]),n.$set(i)},i(o){s||(k(n.$$.fragment,o),s=!0)},o(o){w(n.$$.fragment,o),s=!1},d(o){W(n,o)}}}function Qt(t){let n,s,o,l,i,f=(t[4]===t[42].openAddSection||t[4]===t[42].edit)&&Ve(t),r=t[4]===t[42].uploadQuestions&&Xe(t),p=t[4]===t[42].importQuestions&&Ze(t),d=t[4]===t[42].addSection&&xe(t);return{c(){n=q("div"),f&&f.c(),s=E(),r&&r.c(),o=E(),p&&p.c(),l=E(),d&&d.c(),h(n,"slot","panel")},m(m,S){ne(m,n,S),f&&f.m(n,null),c(n,s),r&&r.m(n,null),c(n,o),p&&p.m(n,null),c(n,l),d&&d.m(n,null),i=!0},p(m,S){m[4]===m[42].openAddSection||m[4]===m[42].edit?f?(f.p(m,S),S[0]&16&&k(f,1)):(f=Ve(m),f.c(),k(f,1),f.m(n,s)):f&&(ge(),w(f,1,1,()=>{f=null}),be()),m[4]===m[42].uploadQuestions?r?(r.p(m,S),S[0]&16&&k(r,1)):(r=Xe(m),r.c(),k(r,1),r.m(n,o)):r&&(ge(),w(r,1,1,()=>{r=null}),be()),m[4]===m[42].importQuestions?p?(p.p(m,S),S[0]&16&&k(p,1)):(p=Ze(m),p.c(),k(p,1),p.m(n,l)):p&&(ge(),w(p,1,1,()=>{p=null}),be()),m[4]===m[42].addSection?d?(d.p(m,S),S[0]&16&&k(d,1)):(d=xe(m),d.c(),k(d,1),d.m(n,null)):d&&(ge(),w(d,1,1,()=>{d=null}),be())},i(m){i||(k(f),k(r),k(p),k(d),i=!0)},o(m){w(f),w(r),w(p),w(d),i=!1},d(m){m&&oe(n),f&&f.d(),r&&r.d(),p&&p.d(),d&&d.d()}}}function It(t){let n,s;return n=new gt({props:{title:t[4],showSheet:t[7],$$slots:{panel:[Qt],default:[wt]},$$scope:{ctx:t}}}),n.$on("onpanelstatus",t[45]),{c(){B(n.$$.fragment)},m(o,l){M(n,o,l),s=!0},p(o,l){const i={};l[0]&16&&(i.title=o[4]),l[0]&128&&(i.showSheet=o[7]),l[0]&1476388735|l[1]&15|l[4]&2097152&&(i.$$scope={dirty:l,ctx:o}),n.$set(i)},i(o){s||(k(n.$$.fragment,o),s=!0)},o(o){w(n.$$.fragment,o),s=!1},d(o){W(n,o)}}}function yt(t){let n,s,o,l,i,f,r,p,d,m,S,Q;return l=new es({props:{options:t[18],placeholder:"Select Section",className:"text-sm"}}),l.$on("selected",t[99]),l.$on("deselected",t[100]),d=new qe({props:{disabled:t[10],buttonText:"Assign",className:"text-sm"}}),d.$on("click",t[102]),{c(){n=q("div"),s=q("p"),s.textContent="Choose Section",o=E(),B(l.$$.fragment),i=E(),f=q("div"),r=q("button"),r.textContent="Cancel",p=E(),B(d.$$.fragment),h(s,"class","font-bold text-gray-800 text-base"),h(r,"class","bg-gray-400 text-white hover:bg-gray-500 rounded-lg px-4 py-2.5 transition text-sm"),h(f,"class","flex items-center space-x-3 w-full"),h(n,"class","flex flex-col space-y-8 justify-center items-center h-full")},m(g,I){ne(g,n,I),c(n,s),c(n,o),M(l,n,null),c(n,i),c(n,f),c(f,r),c(f,p),M(d,f,null),m=!0,S||(Q=Qe(r,"click",t[101]),S=!0)},p(g,I){const y={};I[0]&262144&&(y.options=g[18]),l.$set(y);const C={};I[0]&1024&&(C.disabled=g[10]),d.$set(C)},i(g){m||(k(l.$$.fragment,g),k(d.$$.fragment,g),m=!0)},o(g){w(l.$$.fragment,g),w(d.$$.fragment,g),m=!1},d(g){g&&oe(n),W(l),W(d),S=!1,Q()}}}function vt(t){let n,s,o,l,i,f=t[29].length+"",r,p,d,m,S,Q,g,I,y;return Q=new qe({props:{disabled:t[10],buttonText:"Export",className:"text-sm"}}),Q.$on("click",t[53]),{c(){n=q("div"),s=q("p"),s.textContent="Export Questions",o=E(),l=q("p"),i=_e("Total Questions: "),r=_e(f),p=E(),d=q("div"),m=q("button"),m.textContent="Cancel",S=E(),B(Q.$$.fragment),h(s,"class","font-bold text-gray-800 text-lg"),h(l,"class","text-sm font-semibold"),h(m,"class","bg-gray-400 text-white hover:bg-gray-500 rounded-lg px-4 py-2.5 transition text-sm"),h(d,"class","flex items-center space-x-3 w-full"),h(n,"class","flex flex-col space-y-8 justify-center items-center h-full")},m(C,O){ne(C,n,O),c(n,s),c(n,o),c(n,l),c(l,i),c(l,r),c(n,p),c(n,d),c(d,m),c(d,S),M(Q,d,null),g=!0,I||(y=Qe(m,"click",t[103]),I=!0)},p(C,O){(!g||O[0]&536870912)&&f!==(f=C[29].length+"")&&pt(r,f);const A={};O[0]&1024&&(A.disabled=C[10]),Q.$set(A)},i(C){g||(k(Q.$$.fragment,C),g=!0)},o(C){w(Q.$$.fragment,C),g=!1},d(C){C&&oe(n),W(Q),I=!1,y()}}}function Et(t){let n,s,o,l,i,f;return n=new bt({props:{$$slots:{default:[It]},$$scope:{ctx:t}}}),o=new Ge({props:{show:t[11],$$slots:{default:[yt]},$$scope:{ctx:t}}}),i=new Ge({props:{show:t[12],$$slots:{default:[vt]},$$scope:{ctx:t}}}),{c(){B(n.$$.fragment),s=E(),B(o.$$.fragment),l=E(),B(i.$$.fragment)},m(r,p){M(n,r,p),ne(r,s,p),M(o,r,p),ne(r,l,p),M(i,r,p),f=!0},p(r,p){const d={};p[0]&1476388863|p[1]&15|p[4]&2097152&&(d.$$scope={dirty:p,ctx:r}),n.$set(d);const m={};p[0]&2048&&(m.show=r[11]),p[0]&134482976|p[4]&2097152&&(m.$$scope={dirty:p,ctx:r}),o.$set(m);const S={};p[0]&4096&&(S.show=r[12]),p[0]&536876032|p[4]&2097152&&(S.$$scope={dirty:p,ctx:r}),i.$set(S)},i(r){f||(k(n.$$.fragment,r),k(o.$$.fragment,r),k(i.$$.fragment,r),f=!0)},o(r){w(n.$$.fragment,r),w(o.$$.fragment,r),w(i.$$.fragment,r),f=!1},d(r){r&&(oe(s),oe(l)),W(n,r),W(o,r),W(i,r)}}}function At(t,n,s){let o,l;ut(t,ft,e=>s(115,l=e));let i=Ie,f,r,p,d,m=!1,S=!1,Q=!1,g=!1,I=!1,y=!1,C=!1,O=1,A,z=1,H,le=[],D=[],x=[],_=[],J=[],U=[],Y=[],ie=[],V=[],R=[],ee=[],ce=[],se=[],G=[],pe=[],te=[],b=[],he=[],re=[],L=l.props.assessmentId,fe=l.props.assessmentTitle,$=l.props.subjectId??null,P=l.props.classId??null,de=l.props.subjectTitle,ke=l.props.questionBankId,X=l.props.questionBankClasses,K,a={question:"<p></p>",options:["<p></p>","<p></p>"],correctAnswer:"",questionScore:"1",questionType:"",sectionId:"",topicId:"",source:"",assigned:!1},v={openAddSection:"Add New Question",uploadQuestions:"Upload File",importQuestions:"Import Questions",edit:"Edit Question",addSection:"Add Section",editSection:"Edit Section"},Z={},j={},N={sectionTitle:"",sectionDescription:"",sectionId:"",sectionScore:"",sectionTotalQuestions:"",questionType:""};JSON.stringify(N);let ae=[{placeholder:"Question",value:"question",isSelected:!1},{placeholder:"Option",value:"options",isSelected:!1},{placeholder:"Score",value:"questionScore",isSelected:!1},{placeholder:"Correct Answer",value:"correctAnswer",isSelected:!1}],Be,ss=JSON.stringify(a),ts=JSON.stringify(ae);ct(async()=>{Se(),ns(),Me(),as(),cs(),os(),rs(),us(),is(),Ue(),ls(),sessionStorage.getItem("importError")&&sessionStorage.getItem("importError")});const ye=e=>s(2,i=e),Me=()=>{let e=`/api/question-bank?perPage=120&assessmentId=${L}`;$&&(e+=`&subjectId=${$}`),P&&(e+=`&classId=${P}`),F.getWithToken(e,{onSuccess:u=>{s(31,re=u.data),H=u.meta.last_page},onError:u=>{}})},ns=()=>{let e=`/api/assessment/question-banks/${L}?`;$&&(e+=`&subject=${$}`),P&&(e+=`&class=${P}`),F.getWithToken(e,{onSuccess:u=>{s(30,he=u.data.flatMap(T=>[{placeholder:`${T.subject}   |  ${T.teacher}   |   ${T.totalQuestions} Ques`,value:T.questionBankId}]))}})},Se=()=>{let e=`/api/questions?assessmentId=${L}&perPage=20&assigned=1`;$&&(e+=`&subjectId=${$}`),P&&(e+=`&classId=${P}`),F.getWithToken(e,{onSuccess:u=>{s(0,U=u.data)},onError:u=>{}})},ue=e=>{let u=`/api/questions?questionBankId=${e}&assessmentId=${L}&perPage=20`;return $&&(u+=`&subjectId=${$}`),P&&(u+=`&classId=${P}`),F.getWithToken(u,{onSuccess:async T=>{s(28,pe=T.data)},onError:T=>{}})},We=e=>{K=e,Je(K),ue(K)},os=()=>{F.getWithToken("/api/assessment-types",{onSuccess:e=>{s(20,Y=e.data.flatMap(u=>[{placeholder:u.type,value:u.id}]))},onError:e=>{}})},ls=()=>{F.getWithToken("/api/question-types",{onSuccess:e=>{s(21,ie=e.data.flatMap(u=>[{placeholder:u,value:u}]))},onError:e=>{}})},is=()=>{s(22,V=[{placeholder:"Standalone",value:1},{placeholder:"Termly",value:0}])},rs=()=>{F.getWithToken("/api/terms",{onSuccess:e=>{s(26,se=e.data.flatMap(u=>[{placeholder:u.term,value:u.id}]))}})},as=async()=>{await F.getWithToken("/api/subjects",{onSuccess:e=>{s(23,R=e.data.flatMap(u=>[{placeholder:u.subjectName,value:u.subjectId}]))},onError:e=>{}})},us=()=>{F.getWithToken("/api/sessions",{onSuccess:e=>{s(25,ce=e.data.flatMap(u=>[{placeholder:u.session,value:u.id}]))},onError:e=>{}})},cs=()=>{F.getWithToken("/api/classes",{onSuccess:e=>{s(24,ee=e.data.flatMap(u=>[{placeholder:u.class_name,value:u.id}]))},onError:e=>{}})},me=()=>{ps(),s(7,m=!1)},ps=()=>{s(1,a=JSON.parse(ss)),s(65,ae=JSON.parse(ts)),s(8,S=!1),s(9,Q=!1),j={}},Oe=e=>{s(4,r=e),s(7,m=!0)},Pe=e=>{F.postWithToken("/api/question/assign/"+L,{questionId:e.questionId,subjectId:$},{onSuccess:u=>{U.push(e),s(0,U),te=te.filter(T=>T.questionId===e.questionId)},onError:u=>{}})},ve=e=>{s(10,g=!0),s(27,G=e),F.postWithToken("/api/question/mass-assign/"+L,{questions:G,sectionId:p,classId:P,subjectId:$},{onSuccess:u=>{s(27,G=[]),Se(),K&&ue(K),s(11,I=!1),s(5,p=null),s(10,g=!1)},onError:u=>{u.errors.sectionId&&s(11,I=!0),s(10,g=!1)}})},De=e=>{F.postWithToken("/api/question/unassign/"+L,{questionId:e.questionId,subjectId:$,classId:P},{onSuccess:u=>{s(0,U=U.filter(T=>T.questionId!=e.questionId)),u.data.assessmentId===L&&_s(e)},onError:u=>{console.log(u)}})},Fe=e=>{s(10,g=!0),F.postWithToken("/api/question/mass-unassign/"+L,{questions:e,classId:P,subjectId:$},{onSuccess:u=>{Se(),K&&ue(K),s(10,g=!1)},onError:u=>{}})},we=e=>{Ss(e,b)||(b.push(e),s(29,b))},$e=e=>{s(29,b=b.filter(u=>e!=u))},Ee=(e,u)=>{u===!0?e.forEach(T=>$e(T)):e.forEach(T=>we(T))},fs=()=>{if(b.length!==0){if(!y)return s(12,y=!0);F.downloadExcelWithToken("/api/questions/download-excel",{questions:b},{onSuccess:e=>{const u=window.URL.createObjectURL(new Blob([e.data])),T=document.createElement("a");T.href=u,T.setAttribute("download",`${de}_${X}_questions_${St().format("Y_M_D_H_m_s")}.xlsx`),document.body.appendChild(T),T.click(),s(12,y=!1)},onError:e=>{console.log(e)}})}},Ae=e=>{console.log(e);let u=JSON.stringify(e);s(8,S=!0),s(13,C=!C),s(1,a=JSON.parse(u)),e.assigned?s(17,x=_):(s(9,Q=!0),s(17,x=D)),Oe(v.edit)},ds=()=>{s(8,S=!1),s(9,Q=!1),Oe(v.addSection)},Le=e=>{K&&ue(K),Se(),me(),s(10,g=!1)},ze=e=>{ue(),me(),s(10,g=!1)},ms=()=>{if(g)return;s(10,g=!0);let e=new FormData;e.append("file",f.uploadFile),e.append("assessmentId",L),F.postFormWithToken("/api/question/import",e,{onSuccess:u=>{Be=u.data.key,s(32,Z=u.data.headings),s(4,r=v.importQuestions),setTimeout(()=>s(10,g=!1),2e3)}})},gs=()=>{g||(s(10,g=!0),F.postWithToken("/api/question/import",{mappings:j,assessmentId:L,key:Be,questionBankId:ke,questionType:d,sectionId:p},{onSuccess:e=>{ue(),me(),setTimeout(()=>s(10,g=!1),2e3),e.data.errors&&(sessionStorage.setItem("importError",e.data.errors),e.data.errors)},onError:e=>{ue(),setTimeout(()=>s(10,g=!1),2e3)}}))},Ce=e=>{var T;let u=ae.filter(je=>e.value===je.value&&e.value!="options")[0];u&&(u.isSelected=!u.isSelected),e.selected&&e.value!="options"&&(j[e.value]=Object.keys(Z)[e.index]),e.selected&&e.value=="options"&&(j[e.value]=j[e.value]?[...j[e.value],Object.keys(Z)[e.index]]:[Object.keys(Z)[e.index]]),e.deselected&&e.value!="options"&&delete j[e.value],e.deselected&&e.value=="options"&&(j[e.value]=(T=j[e.value])==null?void 0:T.filter(je=>je!=Object.keys(Z)[e.index])),s(65,ae)},bs=()=>{O!==A&&(s(14,O++,O),ue())},hs=()=>{z!==H&&([...re],z++,Me())},_s=e=>{pe.push(e),s(28,pe),te.push(e)},Je=e=>{F.getWithToken(`/api/question-bank/sections/${e}`,{onSuccess:u=>{s(16,D=u.data.flatMap(T=>[{placeholder:T.sectionTitle,value:T.sectionId,questionType:T.questionType}])),s(15,le=[...D,{placeholder:"No Section",value:"No Section"}])}})},Ue=()=>{let e=`/api/question/assessment/section/get/${L}?`;$&&(e+=`&subjectId=${$}`),P&&(e+=`&classId=${P}`),F.getWithToken(e,{onSuccess:u=>{s(18,_=u.data.flatMap(T=>[{placeholder:T.sectionTitle,value:T.sectionId,questionType:T.questionType}]))}})},qs=()=>{s(10,g=!0),F.postWithToken(`/api/question/assessment/section/create/${L}`,{subjectId:$,classId:P,title:N.sectionTitle,description:N.sectionDescription,questionType:N.questionType,sectionScore:N.sectionScore,totalQuestions:N.sectionTotalQuestions},{onSuccess:e=>{Ue(),me(),s(10,g=!1)},onError:e=>{s(10,g=!1)}})},ks=()=>{s(10,g=!0),F.postWithToken(`/api/question-bank/update/section/${N.sectionId}`,{sectionTitle:N.sectionTitle,sectionDescription:N.sectionDescription,questionType:N.questionType},{onSuccess:e=>{Je(),me(),s(10,g=!1)},onError:e=>{s(10,g=!1)}})},Ss=(e,u)=>u.includes(e),ws=()=>s(10,g=!0),$s=()=>s(10,g=!1),Ts=e=>Le(),Qs=e=>ze();function Is(e){dt[e?"unshift":"push"](()=>{f=e,s(3,f)})}const ys=e=>Ce(e.detail),vs=e=>Ce(e.detail),Es=()=>s(4,r=v.uploadQuestions),As=e=>s(6,d=e.detail.value),Cs=e=>s(6,d=null),js=e=>s(5,p=e.detail.value),Ns=e=>s(5,p=null),Bs=e=>s(33,N.sectionTitle=e.detail.input,N),Ms=e=>s(33,N.questionType=e.detail.value,N),Ws=e=>s(33,N.questionType="",N),Os=e=>s(33,N.sectionDescription=e.detail.input,N),Ps=e=>s(33,N.sectionTotalQuestions=e.detail.input,N),Ds=e=>s(33,N.sectionScore=e.detail.input,N),Fs=()=>ye(Ie),Ls=()=>ye(Ne),zs=e=>ve(e.detail.selectedQuestions),Js=e=>Ae(e.detail),Us=e=>Pe(e.detail),Rs=e=>We(e.detail.value),Hs=e=>we(e.detail.questionId),Ks=e=>$e(e.detail.questionId),Ys=e=>Ee(e.detail.questions,e.detail.checkedAll),Gs=e=>Fe(e.detail.selectedQuestions),Vs=e=>Ae(e.detail),Xs=e=>De(e.detail),Zs=e=>we(e.detail.questionId),xs=e=>$e(e.detail.questionId),et=e=>Ee(e.detail.questions,e.detail.checkedAll),st=e=>s(5,p=e.detail.value),tt=()=>s(5,p=null),nt=()=>{s(27,G=[]),s(11,I=!1)},ot=()=>ve(G),lt=()=>s(12,y=!1);return t.$$.update=()=>{t.$$.dirty[2]&8&&s(34,o=()=>ae==null?void 0:ae.filter(e=>e.isSelected==!1)),t.$$.dirty[0]&1},[U,a,i,f,r,p,d,m,S,Q,g,I,y,C,O,le,D,x,_,J,Y,ie,V,R,ee,ce,se,G,pe,b,he,re,Z,N,o,A,L,fe,$,P,de,X,v,ye,We,me,Pe,ve,De,Fe,we,$e,Ee,fs,Ae,ds,Le,ze,ms,gs,Ce,bs,hs,qs,ks,ae,ws,$s,Ts,Qs,Is,ys,vs,Es,As,Cs,js,Ns,Bs,Ms,Ws,Os,Ps,Ds,Fs,Ls,zs,Js,Us,Rs,Hs,Ks,Ys,Gs,Vs,Xs,Zs,xs,et,st,tt,nt,ot,lt]}class en extends it{constructor(n){super(),rt(this,n,At,Et,at,{},null,[-1,-1,-1,-1,-1])}}export{en as default};
