import{S as de,i as me,s as pe,c as A,m as W,t as S,a as N,d as D,b as ge,o as be,w as ne,f as i,g as j,h as a,j as P,k as r,y as re,B as ae,l as F,D as _e,p as he,C as fe,n as $e,q as ve}from"./app-6d9f305e.js";import we from"./select-5f1b2e78.js";import X from"./icons-c5a046aa.js";import{L as ke}from"./Layout-2cfd6595.js";import ye from"./button-8a7fdb21.js";import{r as V}from"./util-f704b04e.js";import"./utils-4fba9a6a.js";import"./tw-merge-0f2443f8.js";import"./link-7d7fab16.js";function oe(t,l,e){const n=t.slice();return n[17]=l[e],n}function ce(t){let l,e,n,f,d,x;return e=new X({props:{icon:"check",className:`${t[2]?"stroke-green-700":"stroke-gray-300"}`}}),{c(){l=i("button"),A(e.$$.fragment),a(l,"class",n=`flex items-center shrink-0 justify-center h-12 w-12 border-2 ${t[2]?"border-green-700":"border-gray-300"} rounded-lg`)},m(c,h){P(c,l,h),W(e,l,null),f=!0,d||(x=fe(l,"click",t[8]),d=!0)},p(c,h){const m={};h&4&&(m.className=`${c[2]?"stroke-green-700":"stroke-gray-300"}`),e.$set(m),(!f||h&4&&n!==(n=`flex items-center shrink-0 justify-center h-12 w-12 border-2 ${c[2]?"border-green-700":"border-gray-300"} rounded-lg`))&&a(l,"class",n)},i(c){f||(S(e.$$.fragment,c),f=!0)},o(c){N(e.$$.fragment,c),f=!1},d(c){c&&F(l),D(e),d=!1,x()}}}function ie(t){let l,e,n,f,d,x,c,h,m=t[17].class_name+"",$,C,B,T,v,b,q;n=new X({props:{icon:"check",className:`${t[4](t[17].class_code)?"stroke-green-700":"stroke-gray-300"}`}});function E(){return t[12](t[17])}return{c(){l=i("div"),e=i("button"),A(n.$$.fragment),d=j(),x=i("div"),c=i("button"),h=i("span"),$=$e(m),T=j(),a(e,"class",f=`flex items-center shrink-0 justify-center h-12 w-12 border-2 ${t[4](t[17].class_code)?"border-green-700":"border-gray-300"} rounded-lg`),a(h,"class",C=`${t[4](t[17].class_code)?"text-green-700":"text-gray-400/80"}`),a(c,"type","button"),a(c,"class",B=`flex p-3 border-2 ${t[4](t[17].class_code)?"border-green-700":"border-gray-300"}  w-full rounded-lg items-center justify-between space-x-2`),a(x,"class","w-full font-medium"),a(l,"class","flex space-x-2 items-center w-full")},m(w,k){P(w,l,k),r(l,e),W(n,e,null),r(l,d),r(l,x),r(x,c),r(c,h),r(h,$),r(l,T),v=!0,b||(q=fe(e,"click",E),b=!0)},p(w,k){t=w;const o={};k&18&&(o.className=`${t[4](t[17].class_code)?"stroke-green-700":"stroke-gray-300"}`),n.$set(o),(!v||k&18&&f!==(f=`flex items-center shrink-0 justify-center h-12 w-12 border-2 ${t[4](t[17].class_code)?"border-green-700":"border-gray-300"} rounded-lg`))&&a(e,"class",f),(!v||k&2)&&m!==(m=t[17].class_name+"")&&ve($,m),(!v||k&18&&C!==(C=`${t[4](t[17].class_code)?"text-green-700":"text-gray-400/80"}`))&&a(h,"class",C),(!v||k&18&&B!==(B=`flex p-3 border-2 ${t[4](t[17].class_code)?"border-green-700":"border-gray-300"}  w-full rounded-lg items-center justify-between space-x-2`))&&a(c,"class",B)},i(w){v||(S(n.$$.fragment,w),v=!0)},o(w){N(n.$$.fragment,w),v=!1},d(w){w&&F(l),D(n),b=!1,q()}}}function xe(t){let l,e,n,f,d,x,c,h,m,$,C,B,T,v,b,q,E,w,k,o,_,G,I,Z,J,H,K,ee,L,Y,te,O,R,M,U;d=new X({props:{icon:"chevron_right",className:"h-4 w-4 fill-gray-800"}}),m=new X({props:{icon:"chevron_right",className:"h-4 w-4 fill-gray-800"}}),I=new we({props:{options:t[0],placeholder:"Select Course",className:"text-sm py-2.5"}}),I.$on("selected",t[11]);let p=t[1].length>0&&ce(t),Q=ne(t[1]),u=[];for(let s=0;s<Q.length;s+=1)u[s]=ie(oe(t,Q,s));const ue=s=>N(u[s],1,1,()=>{u[s]=null});return M=new ye({props:{disabled:t[3],buttonText:"Continue"}}),M.$on("click",t[9]),{c(){l=i("div"),e=i("div"),n=i("span"),n.textContent="Question Banks",f=j(),A(d.$$.fragment),x=j(),c=i("span"),c.textContent=`${t[5]}`,h=j(),A(m.$$.fragment),$=j(),C=i("span"),C.textContent="Create",B=j(),T=i("div"),v=i("div"),b=i("div"),q=i("div"),q.innerHTML='<div><div class="text-2xl font-extrabold min-w-max text-gray-700">Create Question Bank</div> <div class="text-gray-400 text-sm pt-2">Please select relevant course and levels below</div></div>',E=j(),w=i("div"),k=i("div"),o=i("div"),o.textContent="Select Course",_=j(),G=i("div"),A(I.$$.fragment),Z=j(),J=i("div"),H=i("div"),K=i("span"),K.textContent="Select Levels",ee=j(),L=i("div"),p&&p.c(),Y=j();for(let s=0;s<u.length;s+=1)u[s].c();te=j(),O=i("div"),R=i("div"),A(M.$$.fragment),a(n,"class","mx-2 text-base font-bold text-gray-700 capitalize"),a(c,"class","mx-2 text-base font-bold text-gray-800"),a(C,"class","mx-2 text-base font-bold text-gray-700 capitalize"),a(e,"class","flex space-x-2 items-center"),a(l,"class","fixed flex items-center h-16 justify-between bg-white py-4 container border-b w-[calc(100vw-15rem)] z-50"),a(q,"class","flex items-center justify-between my-2 border-b pb-8"),a(o,"class","flex-shrink-0 w-[12rem] text-gray-700 font-semibold"),a(G,"class","w-full"),a(k,"class","flex w-full items-center text-sm max-w-4xl"),a(w,"class","mt-12 space-y-6 w-full"),a(K,"class","flex-shrink-0 w-[12rem] text-gray-700 font-semibold"),a(L,"class","w-full space-y-2"),a(H,"class","flex w-full text-sm max-w-4xl"),a(J,"class","mt-12 space-y-6 w-full"),a(R,"class","w-40"),a(O,"class","flex w-full mt-10 justify-end"),a(b,"class","border bg-white p-8 rounded-lg max-w-8xl"),a(v,"class","container max-w-4xl my-8"),a(T,"class","fixed container py-8 h-[calc(100vh-8rem)] w-[calc(100vw-15rem)] bottom-0 overflow-y-auto")},m(s,g){P(s,l,g),r(l,e),r(e,n),r(e,f),W(d,e,null),r(e,x),r(e,c),r(e,h),W(m,e,null),r(e,$),r(e,C),P(s,B,g),P(s,T,g),r(T,v),r(v,b),r(b,q),r(b,E),r(b,w),r(w,k),r(k,o),r(k,_),r(k,G),W(I,G,null),r(b,Z),r(b,J),r(J,H),r(H,K),r(H,ee),r(H,L),p&&p.m(L,null),r(L,Y);for(let z=0;z<u.length;z+=1)u[z]&&u[z].m(L,null);r(b,te),r(b,O),r(O,R),W(M,R,null),U=!0},p(s,g){const z={};if(g&1&&(z.options=s[0]),I.$set(z),s[1].length>0?p?(p.p(s,g),g&2&&S(p,1)):(p=ce(s),p.c(),S(p,1),p.m(L,Y)):p&&(re(),N(p,1,1,()=>{p=null}),ae()),g&146){Q=ne(s[1]);let y;for(y=0;y<Q.length;y+=1){const le=oe(s,Q,y);u[y]?(u[y].p(le,g),S(u[y],1)):(u[y]=ie(le),u[y].c(),S(u[y],1),u[y].m(L,null))}for(re(),y=Q.length;y<u.length;y+=1)ue(y);ae()}const se={};g&8&&(se.disabled=s[3]),M.$set(se)},i(s){if(!U){S(d.$$.fragment,s),S(m.$$.fragment,s),S(I.$$.fragment,s),S(p);for(let g=0;g<Q.length;g+=1)S(u[g]);S(M.$$.fragment,s),U=!0}},o(s){N(d.$$.fragment,s),N(m.$$.fragment,s),N(I.$$.fragment,s),N(p),u=u.filter(Boolean);for(let g=0;g<u.length;g+=1)N(u[g]);N(M.$$.fragment,s),U=!1},d(s){s&&(F(l),F(B),F(T)),D(d),D(m),D(I),p&&p.d(),_e(u,s),D(M)}}}function Ce(t){let l,e;return l=new ke({props:{$$slots:{default:[xe]},$$scope:{ctx:t}}}),{c(){A(l.$$.fragment)},m(n,f){W(l,n,f),e=!0},p(n,[f]){const d={};f&1048607&&(d.$$scope={dirty:f,ctx:n}),l.$set(d)},i(n){e||(S(l.$$.fragment,n),e=!0)},o(n){N(l.$$.fragment,n),e=!1},d(n){D(l,n)}}}function je(t,l,e){let n,f;ge(t,he,o=>e(14,f=o));let d=f.props.assessmentTitle,x=f.props.assessmentId,c,h=[],m=[],$=[],C=!1,B=!1;be(()=>{T()});const T=()=>{V.getWithToken("/api/question-bank-subjects/"+x,{onSuccess:o=>{e(0,h=o.data.flatMap(_=>[{placeholder:`${_.subjectName} ( ${_.subjectCode} )`,value:_.subjectId}]))}})},v=o=>{c=o,V.getWithToken(`/api/question-bank-classes/${x}/${o}`,{onSuccess:_=>{e(1,m=_.data)}})},b=o=>{if(n(o.class_code)){e(10,$=$.filter(_=>_.class_code!=o.class_code));return}$.push(o),e(10,$)},q=()=>{C?(e(2,C=!1),e(10,$=[])):(e(2,C=!0),e(10,$=m))},E=()=>{e(3,B=!0);let o=$.flatMap(_=>[_.class_code]);V.postWithToken("/api/question-bank-create?isAssessmentQB=1",{assessmentId:x,classes:o,subjectId:c},{onSuccess:_=>{V.navigateTo(`/assessments/question_bank/sections/${_.data.questionBankId}`)},onError:_=>{e(3,B=!1)}})},w=o=>v(o.detail.value),k=o=>b(o);return t.$$.update=()=>{t.$$.dirty&1024&&e(4,n=o=>$.some(_=>_.class_code==o))},[h,m,C,B,n,d,v,b,q,E,$,w,k]}class ze extends de{constructor(l){super(),me(this,l,je,Ce,pe,{})}}export{ze as default};
