import{S as ae,i as ie,s as ce,w as E,f as b,g as S,c as F,h as d,j as D,k as u,m as G,t as P,B as K,a as B,l as A,d as H,D as ne,b as ue,o as fe,n as W,C as O,q as Q,y as R,p as de,x as pe,u as z,v as me}from"./app-6d9f305e.js";import re from"./icons-c5a046aa.js";import{r as V}from"./util-f704b04e.js";import be from"./dropdown-c4477011.js";import ge from"./button-8a7fdb21.js";import"./utils-4fba9a6a.js";import"./tw-merge-0f2443f8.js";import"./index-000d58f7.js";function ee(e,t,s){const r=e.slice();return r[14]=t[s],r[16]=s,r}function te(e,t,s){const r=e.slice();return r[17]=t[s],r[16]=s,r}function se(e){let t,s,r,l,_,n,a,o,m=e[17].placeholder+"",y,g,v,I,w,x,N;r=new re({props:{icon:"check",className:`${e[0]==e[17].classCode?"stroke-green-700":"stroke-gray-300"}`}});function p(){return e[8](e[17])}return{c(){t=b("div"),s=b("button"),F(r.$$.fragment),_=S(),n=b("div"),a=b("button"),o=b("span"),y=W(m),I=S(),d(s,"class",l=` ${e[0]==e[17].classCode?"border-green-700":"border-gray-300"} flex items-center shrink-0 justify-center h-[2.5rem] w-[2.5rem] border-2 rounded-lg`),d(o,"class",g=`${e[0]==e[17].classCode?"text-green-700":"text-gray-400"} font-medium`),d(a,"type","button"),d(a,"class",v=` ${e[0]==e[17].classCode?"border-green-700":"border-gray-300"} flex py-2.5 px-3 border-2  w-full rounded-lg items-center justify-between space-x-2`),d(n,"class","w-full"),d(t,"class","flex space-x-2 items-center w-full")},m(c,f){D(c,t,f),u(t,s),G(r,s,null),u(t,_),u(t,n),u(n,a),u(a,o),u(o,y),u(t,I),w=!0,x||(N=O(s,"click",p),x=!0)},p(c,f){e=c;const k={};f&5&&(k.className=`${e[0]==e[17].classCode?"stroke-green-700":"stroke-gray-300"}`),r.$set(k),(!w||f&5&&l!==(l=` ${e[0]==e[17].classCode?"border-green-700":"border-gray-300"} flex items-center shrink-0 justify-center h-[2.5rem] w-[2.5rem] border-2 rounded-lg`))&&d(s,"class",l),(!w||f&4)&&m!==(m=e[17].placeholder+"")&&Q(y,m),(!w||f&5&&g!==(g=`${e[0]==e[17].classCode?"text-green-700":"text-gray-400"} font-medium`))&&d(o,"class",g),(!w||f&5&&v!==(v=` ${e[0]==e[17].classCode?"border-green-700":"border-gray-300"} flex py-2.5 px-3 border-2  w-full rounded-lg items-center justify-between space-x-2`))&&d(a,"class",v)},i(c){w||(P(r.$$.fragment,c),w=!0)},o(c){B(r.$$.fragment,c),w=!1},d(c){c&&A(t),H(r),x=!1,N()}}}function he(e){let t,s,r=E(e[1]),l=[];for(let n=0;n<r.length;n+=1)l[n]=le(ee(e,r,n));const _=n=>B(l[n],1,1,()=>{l[n]=null});return{c(){for(let n=0;n<l.length;n+=1)l[n].c();t=pe()},m(n,a){for(let o=0;o<l.length;o+=1)l[o]&&l[o].m(n,a);D(n,t,a),s=!0},p(n,a){if(a&194){r=E(n[1]);let o;for(o=0;o<r.length;o+=1){const m=ee(n,r,o);l[o]?(l[o].p(m,a),P(l[o],1)):(l[o]=le(m),l[o].c(),P(l[o],1),l[o].m(t.parentNode,t))}for(R(),o=r.length;o<l.length;o+=1)_(o);K()}},i(n){if(!s){for(let a=0;a<r.length;a+=1)P(l[a]);s=!0}},o(n){l=l.filter(Boolean);for(let a=0;a<l.length;a+=1)B(l[a]);s=!1},d(n){n&&A(t),ne(l,n)}}}function _e(e){let t;return{c(){t=b("p"),t.textContent="No Subjects assigned for this class"},m(s,r){D(s,t,r)},p:z,i:z,o:z,d(s){s&&A(t)}}}function ve(e){let t;return{c(){t=b("p"),t.textContent="Please Select a class"},m(s,r){D(s,t,r)},p:z,i:z,o:z,d(s){s&&A(t)}}}function we(e){let t,s,r,l,_=e[14].published?"Unpublish":"Publish",n,a,o;function m(){return e[9](e[14])}function y(){return e[10](e[14])}return{c(){t=b("div"),s=b("button"),s.textContent="View Questions",r=S(),l=b("button"),n=W(_),d(s,"type","button"),d(s,"class","text-sm p-2 rounded-lg hover:bg-gray-100 w-full text-left transition"),d(l,"type","button"),d(l,"class","text-sm p-2 rounded-lg hover:bg-gray-100 w-full text-left transition"),d(t,"class","flex flex-col space-y-2 items-start")},m(g,v){D(g,t,v),u(t,s),u(t,r),u(t,l),u(l,n),a||(o=[O(s,"click",m),O(l,"click",y)],a=!0)},p(g,v){e=g,v&2&&_!==(_=e[14].published?"Unpublish":"Publish")&&Q(n,_)},d(g){g&&A(t),a=!1,me(o)}}}function le(e){let t,s,r=e[14].subjectName+"",l,_,n=e[14].subjectCode+"",a,o,m,y,g=e[14].published?"Published":"Unpublished",v,I,w,x,N,p,c;return x=new be({props:{arrowColor:"fill-gray-600",placeholder:"Actions",className:"bg-white border  border-gray-300 text-gray-600",$$slots:{default:[we]},$$scope:{ctx:e}}}),{c(){t=b("div"),s=b("div"),l=W(r),_=W(" ( "),a=W(n),o=W(" )"),m=S(),y=b("div"),v=W(g),w=S(),F(x.$$.fragment),N=S(),d(s,"class","text-gray-800 text-sm flex flex-row w-[24rem] items-center text-start"),d(y,"class",I=`px-4 py-2 text-center rounded w-[10rem] ${e[14].published?"bg-green-200 text-green-800":"bg-red-200 text-red-800"} w-28 text-sm`),d(t,"class",p=`flex items-center justify-between  space-x-10 ${e[16]!=e[1].length-1?"border-b pb-4":""}`)},m(f,k){D(f,t,k),u(t,s),u(s,l),u(s,_),u(s,a),u(s,o),u(t,m),u(t,y),u(y,v),u(t,w),G(x,t,null),u(t,N),c=!0},p(f,k){(!c||k&2)&&r!==(r=f[14].subjectName+"")&&Q(l,r),(!c||k&2)&&n!==(n=f[14].subjectCode+"")&&Q(a,n),(!c||k&2)&&g!==(g=f[14].published?"Published":"Unpublished")&&Q(v,g),(!c||k&2&&I!==(I=`px-4 py-2 text-center rounded w-[10rem] ${f[14].published?"bg-green-200 text-green-800":"bg-red-200 text-red-800"} w-28 text-sm`))&&d(y,"class",I);const C={};k&524290&&(C.$$scope={dirty:k,ctx:f}),x.$set(C),(!c||k&2&&p!==(p=`flex items-center justify-between  space-x-10 ${f[16]!=f[1].length-1?"border-b pb-4":""}`))&&d(t,"class",p)},i(f){c||(P(x.$$.fragment,f),c=!0)},o(f){B(x.$$.fragment,f),c=!1},d(f){f&&A(t),H(x)}}}function xe(e){let t,s,r,l,_,n,a,o,m,y,g,v,I,w,x,N,p,c,f,k,C,T,L;_=new re({props:{icon:"chevron_right",className:"h-4 w-4 fill-gray-800"}});let U=E(e[2]),h=[];for(let i=0;i<U.length;i+=1)h[i]=se(te(e,U,i));const oe=i=>B(h[i],1,1,()=>{h[i]=null});c=new ge({props:{disabled:e[3],buttonText:"Publish All",className:"min-w-max max-w-min text-sm"}});const X=[ve,_e,he],M=[];function Y(i,$){return i[0]?i[0]&&i[1].length===0?1:2:0}return C=Y(e),T=M[C]=X[C](e),{c(){t=b("div"),s=b("div"),r=b("span"),r.textContent="Manage",l=S(),F(_.$$.fragment),n=S(),a=b("span"),a.textContent=`${e[4]}`,o=S(),m=b("div"),y=b("p"),y.textContent="Levels",g=S(),v=b("div");for(let i=0;i<h.length;i+=1)h[i].c();I=S(),w=b("div"),x=b("div"),N=b("span"),N.textContent="Courses",p=S(),F(c.$$.fragment),f=S(),k=b("div"),T.c(),d(r,"class","text-base font-medium text-gray-700 capitalize"),d(a,"class","mx-2 text-base font-medium text-gray-800"),d(s,"class","flex space-x-2 items-center"),d(t,"class","fixed flex items-center h-16 justify-between px-6 bg-white py-4 border-b w-[calc(100vw-15rem)] z-50"),d(y,"class","flex fixed items-center font-extrabold text-lg text-gray-600 border-b px-6 h-16 w-96"),d(v,"class","fixed mt-10 space-y-3 text-xs px-5 py-10 w-96 h-[calc(100vh-12rem)] bottom-0 overflow-y-auto"),d(m,"class","fixed h-[calc(100vh-8rem)] bottom-0 flex flex-col items-center w-96 border-r bg-white"),d(N,"class","font-extrabold text-lg text-gray-600"),d(x,"class","fixed flex items-center justify-between border-b space-x-4 h-16 w-[calc(100vw-39rem)] px-8 bg-white"),d(k,"class","fixed h-[calc(100vh-12rem)] bottom-0 right-0 flex flex-col w-[calc(100vw-39rem)] bg-white space-y-4 pt-8 pb-16 px-8 overflow-y-auto"),d(w,"class","fixed h-[calc(100vh-8rem)] bottom-0 right-0 flex flex-col w-[calc(100vw-39rem)] bg-white")},m(i,$){D(i,t,$),u(t,s),u(s,r),u(s,l),G(_,s,null),u(s,n),u(s,a),D(i,o,$),D(i,m,$),u(m,y),u(m,g),u(m,v);for(let q=0;q<h.length;q+=1)h[q]&&h[q].m(v,null);D(i,I,$),D(i,w,$),u(w,x),u(x,N),u(x,p),G(c,x,null),u(w,f),u(w,k),M[C].m(k,null),L=!0},p(i,[$]){if($&37){U=E(i[2]);let j;for(j=0;j<U.length;j+=1){const Z=te(i,U,j);h[j]?(h[j].p(Z,$),P(h[j],1)):(h[j]=se(Z),h[j].c(),P(h[j],1),h[j].m(v,null))}for(R(),j=U.length;j<h.length;j+=1)oe(j);K()}const q={};$&8&&(q.disabled=i[3]),c.$set(q);let J=C;C=Y(i),C===J?M[C].p(i,$):(R(),B(M[J],1,1,()=>{M[J]=null}),K(),T=M[C],T?T.p(i,$):(T=M[C]=X[C](i),T.c()),P(T,1),T.m(k,null))},i(i){if(!L){P(_.$$.fragment,i);for(let $=0;$<U.length;$+=1)P(h[$]);P(c.$$.fragment,i),P(T),L=!0}},o(i){B(_.$$.fragment,i),h=h.filter(Boolean);for(let $=0;$<h.length;$+=1)B(h[$]);B(c.$$.fragment,i),B(T),L=!1},d(i){i&&(A(t),A(o),A(m),A(I),A(w)),H(_),ne(h,i),H(c),M[C].d()}}}function $e(e,t,s){let r;ue(e,de,p=>s(12,r=p));let l=r.props.assessmentId,_=r.props.assessmentTitle,n,a,o=[],m=[],y=!0;fe(async()=>{await V.getWithToken("/api/assessment-classes/"+l,{onSuccess:p=>{s(2,o=p.data.flatMap(c=>[{placeholder:c.class_name,value:c.id,classCode:c.class_code}]))}}),sessionStorage.getItem("classID")&&(a=sessionStorage.getItem("classID"),g(a))});const g=p=>{var c;a=p,s(0,n=(c=o.filter(f=>f.value===p)[0])==null?void 0:c.classCode),V.getWithToken("/api/assessment-subjects/"+l+"?classId="+p,{onSuccess:f=>{s(1,m=f.data)}}),sessionStorage.setItem("classID",a)},v=async p=>{await V.navigateTo(`/questions/create/t/${l}/${p}/${n}`)},I=p=>{let c=!p.published;V.postWithToken("/api/assessment/publish/termly",{subjectId:p.subjectId,classId:n,assessmentId:l,shouldPublish:c},{onSuccess:f=>{g(a)}})},w=p=>g(p.value),x=p=>v(p.subjectId),N=p=>I(p);return e.$$.update=()=>{e.$$.dirty&3&&s(3,y=!(n&&m.length>0))},[n,m,o,y,_,g,v,I,w,x,N]}class Te extends ae{constructor(t){super(),ie(this,t,$e,xe,ce,{})}}export{Te as default};
