import{S as Qe,i as Ve,s as Xe,c as D,m as E,t as m,a as S,d as F,o as Ye,e as ue,g as A,j as J,l as W,f as N,h as b,k as d,y as Q,B as V,L as _e,C as te,u as ae,w as fe,x as Ae,D as ve,n as ie,q as ce,v as Ze}from"./app-6d9f305e.js";import{r as K}from"./util-f704b04e.js";import Y from"./button-8a7fdb21.js";import xe from"./data_table-2f3c9d25.js";import et from"./icons-c5a046aa.js";import de from"./input-694295df.js";import tt from"./select-5f1b2e78.js";import st from"./slide_panel-2bd9836d.js";import{L as lt}from"./Layout-2cfd6595.js";import nt from"./dropdown-c4477011.js";import rt from"./CsvImportCard-44751b91.js";import ot from"./importmapper-864373ab.js";import ut from"./top_header-1e968582.js";import at from"./app_container-a54f34ce.js";import"./utils-4fba9a6a.js";import"./tw-merge-0f2443f8.js";import"./utils-27538abd.js";import"./index-000d58f7.js";import"./link-7d7fab16.js";function he(l,e,t){const s=l.slice();return s[65]=e[t],s[67]=t,s}function be(l,e,t){const s=l.slice();return s[62]=e[t],s}function it(l){let e,t,s,n,o,r,i,u,c,f,k;return t=new Y({props:{buttonText:"Add New Student",className:"text-sm min-w-max max-w-min"}}),t.$on("click",l[50]),n=new Y({props:{buttonText:"Import Students",className:"text-sm min-w-max max-w-min"}}),n.$on("click",l[51]),r=new Y({props:{buttonText:"Download Students Data",className:"text-sm min-w-max max-w-min"}}),r.$on("click",l[27]),u=new Y({props:{buttonText:l[4]?"Uncheck All":"Check All",className:"text-sm min-w-max max-w-min"}}),u.$on("click",l[36]),f=new Y({props:{buttonText:"Assign Courses",className:"text-sm min-w-max max-w-min"}}),f.$on("click",l[52]),{c(){e=N("div"),D(t.$$.fragment),s=A(),D(n.$$.fragment),o=A(),D(r.$$.fragment),i=A(),D(u.$$.fragment),c=A(),D(f.$$.fragment),b(e,"class","flex space-x-3")},m(g,v){J(g,e,v),E(t,e,null),d(e,s),E(n,e,null),d(e,o),E(r,e,null),d(e,i),E(u,e,null),d(e,c),E(f,e,null),k=!0},p(g,v){const _={};v[0]&16&&(_.buttonText=g[4]?"Uncheck All":"Check All"),u.$set(_)},i(g){k||(m(t.$$.fragment,g),m(n.$$.fragment,g),m(r.$$.fragment,g),m(u.$$.fragment,g),m(f.$$.fragment,g),k=!0)},o(g){S(t.$$.fragment,g),S(n.$$.fragment,g),S(r.$$.fragment,g),S(u.$$.fragment,g),S(f.$$.fragment,g),k=!1},d(g){g&&W(e),F(t),F(n),F(r),F(u),F(f)}}}function ct(l){let e,t,s,n,o;function r(){return l[54](l[65])}function i(){return l[55](l[67])}return{c(){e=N("button"),e.textContent="Edit Student",t=A(),s=N("button"),s.textContent="Assign Courses",b(e,"class","hover:bg-gray-100 p-3 text-sm rounded transition text-left"),b(s,"class","hover:bg-gray-100 p-3 text-sm rounded transition text-left")},m(u,c){J(u,e,c),J(u,t,c),J(u,s,c),n||(o=[te(e,"click",r),te(s,"click",i)],n=!0)},p(u,c){l=u},d(u){u&&(W(e),W(t),W(s)),n=!1,Ze(o)}}}function Se(l){let e,t,s,n,o,r,i,u=l[65].name+"",c,f,k,g=l[65].class+"",v,_,h,$=l[65].studentCode+"",C,j,L,R,M,Z,P,p,B;function U(...y){return l[53](l[65],...y)}return M=new nt({props:{arrowColor:"fill-gray-600",placeholder:"Actions",className:"bg-white border  border-gray-300 text-gray-600",$$slots:{default:[ct]},$$scope:{ctx:l}}}),{c(){e=N("tr"),t=N("td"),s=N("input"),r=A(),i=N("td"),c=ie(u),f=A(),k=N("td"),v=ie(g),_=A(),h=N("td"),C=ie($),j=A(),L=N("td"),R=N("div"),D(M.$$.fragment),Z=A(),s.checked=n=l[18](l[65].studentId),b(s,"type","checkbox"),s.value=o=l[65].studentId,b(s,"name",""),b(s,"id",""),b(t,"class","px-4"),b(i,"class","px-4 py-4 text-sm text-gray-500 dark:text-gray-300 whitespace-nowrap"),b(k,"class","px-4 py-4 text-sm text-gray-500 dark:text-gray-300 whitespace-nowrap"),b(h,"class","px-4 py-4 text-sm text-blue-500 dark:text-gray-300 whitespace-nowrap"),b(R,"class","w-40"),b(L,"class","px-4 py-4 text-sm text-gray-500 dark:text-gray-300 whitespace-nowrap")},m(y,q){J(y,e,q),d(e,t),d(t,s),d(e,r),d(e,i),d(i,c),d(e,f),d(e,k),d(k,v),d(e,_),d(e,h),d(h,C),d(e,j),d(e,L),d(L,R),E(M,R,null),d(e,Z),P=!0,p||(B=te(s,"input",U),p=!0)},p(y,q){l=y,(!P||q[0]&264192&&n!==(n=l[18](l[65].studentId)))&&(s.checked=n),(!P||q[0]&2048&&o!==(o=l[65].studentId))&&(s.value=o),(!P||q[0]&2048)&&u!==(u=l[65].name+"")&&ce(c,u),(!P||q[0]&2048)&&g!==(g=l[65].class+"")&&ce(v,g),(!P||q[0]&2048)&&$!==($=l[65].studentCode+"")&&ce(C,$);const T={};q[0]&2048|q[2]&64&&(T.$$scope={dirty:q,ctx:l}),M.$set(T)},i(y){P||(m(M.$$.fragment,y),P=!0)},o(y){S(M.$$.fragment,y),P=!1},d(y){y&&W(e),F(M),p=!1,B()}}}function ft(l){let e,t,s=fe(l[11]),n=[];for(let r=0;r<s.length;r+=1)n[r]=Se(he(l,s,r));const o=r=>S(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Ae()},m(r,i){for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(r,i);J(r,e,i),t=!0},p(r,i){if(i[0]&1082394624|i[1]&24){s=fe(r[11]);let u;for(u=0;u<s.length;u+=1){const c=he(r,s,u);n[u]?(n[u].p(c,i),m(n[u],1)):(n[u]=Se(c),n[u].c(),m(n[u],1),n[u].m(e.parentNode,e))}for(Q(),u=s.length;u<n.length;u+=1)o(u);V()}},i(r){if(!t){for(let i=0;i<s.length;i+=1)m(n[i]);t=!0}},o(r){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)S(n[i]);t=!1},d(r){r&&W(e),ve(n,r)}}}function pt(l){let e,t;return e=new xe({props:{headings:l[20],$$slots:{default:[ft]},$$scope:{ctx:l}}}),{c(){D(e.$$.fragment)},m(s,n){E(e,s,n),t=!0},p(s,n){const o={};n[0]&264192|n[2]&64&&(o.$$scope={dirty:n,ctx:s}),e.$set(o)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){S(e.$$.fragment,s),t=!1},d(s){F(e,s)}}}function dt(l){let e,t,s,n;return e=new ut({props:{title:`Students ( ${l[11].length}  )`,$$slots:{default:[it]},$$scope:{ctx:l}}}),s=new at({props:{$$slots:{default:[pt]},$$scope:{ctx:l}}}),{c(){D(e.$$.fragment),t=A(),D(s.$$.fragment)},m(o,r){E(e,o,r),J(o,t,r),E(s,o,r),n=!0},p(o,r){const i={};r[0]&2048&&(i.title=`Students ( ${o[11].length}  )`),r[0]&16|r[2]&64&&(i.$$scope={dirty:r,ctx:o}),e.$set(i);const u={};r[0]&264192|r[2]&64&&(u.$$scope={dirty:r,ctx:o}),s.$set(u)},i(o){n||(m(e.$$.fragment,o),m(s.$$.fragment,o),n=!0)},o(o){S(e.$$.fragment,o),S(s.$$.fragment,o),n=!1},d(o){o&&W(t),F(e,o),F(s,o)}}}function ke(l){let e,t,s,n,o,r,i,u,c,f,k,g,v,_,h,$,C,j,L,R,M,Z,P,p,B,U,y,q,T={value:l[17].firstName,label:"Enter Student First Name"};s=new de({props:T}),l[39](s),s.$on("input",l[40]);let ee={value:l[17].surname,label:"Enter Student Surname"};r=new de({props:ee}),l[41](r),r.$on("input",l[42]),c=new de({props:{value:l[17].studentCode,label:"Enter Student Code"}}),c.$on("input",l[43]);let pe={isSelected:!!l[17].class,value:l[17].classId,options:l[5],placeholder:l[17].class?l[17].class:"Select Level",label:"Select Student Level",className:"text-sm"};g=new tt({props:pe}),l[44](g),g.$on("selected",l[45]);const ne=[gt,mt],z=[];function re(w,O){return w[1]==w[21].edit?0:1}return p=re(l),B=z[p]=ne[p](l),{c(){var w;e=N("div"),t=N("div"),D(s.$$.fragment),n=A(),o=N("div"),D(r.$$.fragment),i=A(),u=N("div"),D(c.$$.fragment),f=A(),k=N("div"),D(g.$$.fragment),v=A(),_=N("div"),h=N("label"),h.textContent="Upload Student Photo",$=A(),C=N("img"),R=A(),M=N("input"),Z=A(),P=N("div"),B.c(),b(h,"for","pic"),b(h,"class","text-sm text-gray-800"),b(C,"alt",""),b(C,"class",j=`rounded-lg h-60 w-60 mt-4 ${((w=l[17].photo)==null?void 0:w.length)>0?"":"hidden"}`),_e(C.src,L=l[17].photo?l[17].photo:l[2])||b(C,"src",L),b(C,"id","preview"),b(M,"type","file"),b(M,"accept","image/*"),b(M,"id","pic"),b(_,"class","flex flex-col space-y-4"),b(P,"class","w-20"),b(e,"class","flex flex-col space-y-6 p-3")},m(w,O){J(w,e,O),d(e,t),E(s,t,null),d(e,n),d(e,o),E(r,o,null),d(e,i),d(e,u),E(c,u,null),d(e,f),d(e,k),E(g,k,null),d(e,v),d(e,_),d(_,h),d(_,$),d(_,C),d(_,R),d(_,M),d(e,Z),d(e,P),z[p].m(P,null),U=!0,y||(q=te(M,"change",l[46]),y=!0)},p(w,O){var le;const oe={};O[0]&131072&&(oe.value=w[17].firstName),s.$set(oe);const G={};O[0]&131072&&(G.value=w[17].surname),r.$set(G);const X={};O[0]&131072&&(X.value=w[17].studentCode),c.$set(X);const x={};O[0]&131072&&(x.isSelected=!!w[17].class),O[0]&131072&&(x.value=w[17].classId),O[0]&32&&(x.options=w[5]),O[0]&131072&&(x.placeholder=w[17].class?w[17].class:"Select Level"),g.$set(x),(!U||O[0]&131072&&j!==(j=`rounded-lg h-60 w-60 mt-4 ${((le=w[17].photo)==null?void 0:le.length)>0?"":"hidden"}`))&&b(C,"class",j),(!U||O[0]&131076&&!_e(C.src,L=w[17].photo?w[17].photo:w[2]))&&b(C,"src",L);let se=p;p=re(w),p===se?z[p].p(w,O):(Q(),S(z[se],1,1,()=>{z[se]=null}),V(),B=z[p],B?B.p(w,O):(B=z[p]=ne[p](w),B.c()),m(B,1),B.m(P,null))},i(w){U||(m(s.$$.fragment,w),m(r.$$.fragment,w),m(c.$$.fragment,w),m(g.$$.fragment,w),m(B),U=!0)},o(w){S(s.$$.fragment,w),S(r.$$.fragment,w),S(c.$$.fragment,w),S(g.$$.fragment,w),S(B),U=!1},d(w){w&&W(e),l[39](null),F(s),l[41](null),F(r),F(c),l[44](null),F(g),z[p].d(),y=!1,q()}}}function mt(l){let e,t;return e=new Y({props:{disabled:l[3],buttonText:"Save",className:""}}),e.$on("click",l[22]),{c(){D(e.$$.fragment)},m(s,n){E(e,s,n),t=!0},p(s,n){const o={};n[0]&8&&(o.disabled=s[3]),e.$set(o)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){S(e.$$.fragment,s),t=!1},d(s){F(e,s)}}}function gt(l){let e,t;return e=new Y({props:{disabled:l[3],buttonText:"Update",className:""}}),e.$on("click",l[24]),{c(){D(e.$$.fragment)},m(s,n){E(e,s,n),t=!0},p(s,n){const o={};n[0]&8&&(o.disabled=s[3]),e.$set(o)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){S(e.$$.fragment,s),t=!1},d(s){F(e,s)}}}function we(l){let e,t,s,n,o,r,i,u,c,f;const k=[ht,_t],g=[];function v($,C){return $[9].length===0?0:1}o=v(l),r=g[o]=k[o](l);let _=l[1]===l[21].assignSubjects&&Ce(l),h=l[1]===l[21].massAssignCourses&&Ie(l);return{c(){e=N("div"),t=N("p"),t.textContent="Courses",s=A(),n=N("div"),r.c(),i=A(),u=N("div"),_&&_.c(),c=A(),h&&h.c(),b(t,"class","text-gray-800 font-semibold pb-6"),b(n,"class","space-y-3"),b(u,"class","pt-10 w-40"),b(e,"class","flex flex-col space-y-3 p-3")},m($,C){J($,e,C),d(e,t),d(e,s),d(e,n),g[o].m(n,null),d(e,i),d(e,u),_&&_.m(u,null),d(u,c),h&&h.m(u,null),f=!0},p($,C){let j=o;o=v($),o===j?g[o].p($,C):(Q(),S(g[j],1,1,()=>{g[j]=null}),V(),r=g[o],r?r.p($,C):(r=g[o]=k[o]($),r.c()),m(r,1),r.m(n,null)),$[1]===$[21].assignSubjects?_?(_.p($,C),C[0]&2&&m(_,1)):(_=Ce($),_.c(),m(_,1),_.m(u,c)):_&&(Q(),S(_,1,1,()=>{_=null}),V()),$[1]===$[21].massAssignCourses?h?(h.p($,C),C[0]&2&&m(h,1)):(h=Ie($),h.c(),m(h,1),h.m(u,null)):h&&(Q(),S(h,1,1,()=>{h=null}),V())},i($){f||(m(r),m(_),m(h),f=!0)},o($){S(r),S(_),S(h),f=!1},d($){$&&W(e),g[o].d(),_&&_.d(),h&&h.d()}}}function _t(l){let e,t,s=fe(l[9]),n=[];for(let r=0;r<s.length;r+=1)n[r]=$e(be(l,s,r));const o=r=>S(n[r],1,1,()=>{n[r]=null});return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=Ae()},m(r,i){for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(r,i);J(r,e,i),t=!0},p(r,i){if(i[0]&524800|i[1]&2){s=fe(r[9]);let u;for(u=0;u<s.length;u+=1){const c=be(r,s,u);n[u]?(n[u].p(c,i),m(n[u],1)):(n[u]=$e(c),n[u].c(),m(n[u],1),n[u].m(e.parentNode,e))}for(Q(),u=s.length;u<n.length;u+=1)o(u);V()}},i(r){if(!t){for(let i=0;i<s.length;i+=1)m(n[i]);t=!0}},o(r){n=n.filter(Boolean);for(let i=0;i<n.length;i+=1)S(n[i]);t=!1},d(r){r&&W(e),ve(n,r)}}}function ht(l){let e;return{c(){e=N("div"),e.innerHTML='<p class="italic text-gray-500">No courses to add</p>',b(e,"class","flex w-full py-6")},m(t,s){J(t,e,s)},p:ae,i:ae,o:ae,d(t){t&&W(e)}}}function $e(l){let e,t,s,n,o,r,i,u,c=l[62].subjectName+"",f,k,g,v,_,h,$;s=new et({props:{icon:"check",className:`${l[19](l[62].subjectId)?"stroke-green-700":"stroke-gray-300"}`}});function C(){return l[47](l[62])}return{c(){e=N("div"),t=N("button"),D(s.$$.fragment),o=A(),r=N("div"),i=N("button"),u=N("span"),f=ie(c),v=A(),b(t,"class",n=`flex items-center shrink-0 justify-center h-[3.2rem] w-[3.2rem] border-2 ${l[19](l[62].subjectId)?"border-green-700":"border-gray-300"} rounded-lg`),b(u,"class",k=`${l[19](l[62].subjectId)?"text-green-700":"text-gray-400"}`),b(i,"type","button"),b(i,"class",g=`flex p-3 border-2 ${l[19](l[62].subjectId)?"border-green-700":"border-gray-300"}  w-full rounded-lg items-center justify-between space-x-2`),b(r,"class","w-full"),b(e,"class","flex space-x-2 items-center w-full")},m(j,L){J(j,e,L),d(e,t),E(s,t,null),d(e,o),d(e,r),d(r,i),d(i,u),d(u,f),d(e,v),_=!0,h||($=te(t,"click",C),h=!0)},p(j,L){l=j;const R={};L[0]&524800&&(R.className=`${l[19](l[62].subjectId)?"stroke-green-700":"stroke-gray-300"}`),s.$set(R),(!_||L[0]&524800&&n!==(n=`flex items-center shrink-0 justify-center h-[3.2rem] w-[3.2rem] border-2 ${l[19](l[62].subjectId)?"border-green-700":"border-gray-300"} rounded-lg`))&&b(t,"class",n),(!_||L[0]&512)&&c!==(c=l[62].subjectName+"")&&ce(f,c),(!_||L[0]&524800&&k!==(k=`${l[19](l[62].subjectId)?"text-green-700":"text-gray-400"}`))&&b(u,"class",k),(!_||L[0]&524800&&g!==(g=`flex p-3 border-2 ${l[19](l[62].subjectId)?"border-green-700":"border-gray-300"}  w-full rounded-lg items-center justify-between space-x-2`))&&b(i,"class",g)},i(j){_||(m(s.$$.fragment,j),_=!0)},o(j){S(s.$$.fragment,j),_=!1},d(j){j&&W(e),F(s),h=!1,$()}}}function Ce(l){let e,t;return e=new Y({props:{disabled:l[3],buttonText:"Assign Courses"}}),e.$on("click",l[33]),{c(){D(e.$$.fragment)},m(s,n){E(e,s,n),t=!0},p(s,n){const o={};n[0]&8&&(o.disabled=s[3]),e.$set(o)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){S(e.$$.fragment,s),t=!1},d(s){F(e,s)}}}function Ie(l){let e,t;return e=new Y({props:{disabled:l[3],buttonText:"Assign Courses"}}),e.$on("click",l[31]),{c(){D(e.$$.fragment)},m(s,n){E(e,s,n),t=!0},p(s,n){const o={};n[0]&8&&(o.disabled=s[3]),e.$set(o)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){S(e.$$.fragment,s),t=!1},d(s){F(e,s)}}}function Ne(l){let e,t,s={disabled:l[3]};return e=new rt({props:s}),l[48](e),e.$on("on-upload",l[25]),{c(){D(e.$$.fragment)},m(n,o){E(e,n,o),t=!0},p(n,o){const r={};o[0]&8&&(r.disabled=n[3]),e.$set(r)},i(n){t||(m(e.$$.fragment,n),t=!0)},o(n){S(e.$$.fragment,n),t=!1},d(n){l[48](null),F(e,n)}}}function je(l){let e,t;return e=new ot({props:{disabled:l[3],options:l[16],headings:l[15],$$slots:{default:[bt]},$$scope:{ctx:l}}}),e.$on("import",l[26]),{c(){D(e.$$.fragment)},m(s,n){E(e,s,n),t=!0},p(s,n){const o={};n[0]&8&&(o.disabled=s[3]),n[0]&65536&&(o.options=s[16]),n[0]&32768&&(o.headings=s[15]),n[0]&1024|n[2]&64&&(o.$$scope={dirty:n,ctx:s}),e.$set(o)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){S(e.$$.fragment,s),t=!1},d(s){F(e,s)}}}function bt(l){let e,t,s,n;return{c(){e=N("div"),t=N("input"),b(t,"type","file"),b(t,"accept",".zip"),b(t,"class","border border-gray-200 rounded-lg p-4"),b(e,"class","py-8")},m(o,r){J(o,e,r),d(e,t),s||(n=te(t,"change",l[49]),s=!0)},p:ae,d(o){o&&W(e),s=!1,n()}}}function St(l){let e,t,s,n,o,r=(l[1]===l[21].addNewStudent||l[1]===l[21].edit)&&ke(l),i=(l[1]===l[21].assignSubjects||l[1]===l[21].massAssignCourses)&&we(l),u=l[1]===l[21].upload&&Ne(l),c=l[1]===l[21].importStudents&&je(l);return{c(){e=N("div"),r&&r.c(),t=A(),i&&i.c(),s=A(),u&&u.c(),n=A(),c&&c.c(),b(e,"slot","panel")},m(f,k){J(f,e,k),r&&r.m(e,null),d(e,t),i&&i.m(e,null),d(e,s),u&&u.m(e,null),d(e,n),c&&c.m(e,null),o=!0},p(f,k){f[1]===f[21].addNewStudent||f[1]===f[21].edit?r?(r.p(f,k),k[0]&2&&m(r,1)):(r=ke(f),r.c(),m(r,1),r.m(e,t)):r&&(Q(),S(r,1,1,()=>{r=null}),V()),f[1]===f[21].assignSubjects||f[1]===f[21].massAssignCourses?i?(i.p(f,k),k[0]&2&&m(i,1)):(i=we(f),i.c(),m(i,1),i.m(e,s)):i&&(Q(),S(i,1,1,()=>{i=null}),V()),f[1]===f[21].upload?u?(u.p(f,k),k[0]&2&&m(u,1)):(u=Ne(f),u.c(),m(u,1),u.m(e,n)):u&&(Q(),S(u,1,1,()=>{u=null}),V()),f[1]===f[21].importStudents?c?(c.p(f,k),k[0]&2&&m(c,1)):(c=je(f),c.c(),m(c,1),c.m(e,null)):c&&(Q(),S(c,1,1,()=>{c=null}),V())},i(f){o||(m(r),m(i),m(u),m(c),o=!0)},o(f){S(r),S(i),S(u),S(c),o=!1},d(f){f&&W(e),r&&r.d(),i&&i.d(),u&&u.d(),c&&c.d()}}}function kt(l){let e,t;return e=new st({props:{title:l[12],showSheet:l[13],$$slots:{panel:[St],default:[dt]},$$scope:{ctx:l}}}),e.$on("onpanelstatus",l[29]),{c(){D(e.$$.fragment)},m(s,n){E(e,s,n),t=!0},p(s,n){const o={};n[0]&4096&&(o.title=s[12]),n[0]&8192&&(o.showSheet=s[13]),n[0]&1036287|n[2]&64&&(o.$$scope={dirty:n,ctx:s}),e.$set(o)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){S(e.$$.fragment,s),t=!1},d(s){F(e,s)}}}function wt(l){let e,t;return e=new lt({props:{$$slots:{default:[kt]},$$scope:{ctx:l}}}),{c(){D(e.$$.fragment)},m(s,n){E(e,s,n),t=!0},p(s,n){const o={};n[0]&1048575|n[2]&64&&(o.$$scope={dirty:n,ctx:s}),e.$set(o)},i(s){t||(m(e.$$.fragment,s),t=!0)},o(s){S(e.$$.fragment,s),t=!1},d(s){F(e,s)}}}function $t(l,e,t){let s,n,o=!1,r=!1,i=["Name","Level","Student Code","Actions"],u=[],c,f,k,g=[],v,_,h=[],$=[],C,j,L,R,M,Z=[],P=[{placeholder:"First Name",value:"firstName",isSelected:!1},{placeholder:"Last Name",value:"lastName",isSelected:!1},{placeholder:"Email",value:"email",isSelected:!1},{placeholder:"Phone Number",value:"phoneNo",isSelected:!1},{placeholder:"Student Code",value:"studentCode",isSelected:!1},{placeholder:"Student ID",value:"studentId",isSelected:!1},{placeholder:"Program of Study",value:"programOfStudy",isSelected:!1},{placeholder:"Passport",value:"passport",isSelected:!1},{placeholder:"Level",value:"level",isSelected:!1},{placeholder:"Department",value:"department",isSelected:!1},{placeholder:"Faculty",value:"faculty",isSelected:!1},{placeholder:"Program Type",value:"programType",isSelected:!1},{placeholder:"Session",value:"session",isSelected:!1},{placeholder:"Courses",value:"courses",isSelected:!1}],p={id:"",name:"",firstName:"",surname:"",class:"",classId:"",studentCode:"",photo:""},B=JSON.stringify(P),U=[],y="";const q=()=>{t(17,p={id:"",name:"",firstName:"",surname:"",class:"",classId:"",studentCode:"",photo:""})},T={addNewStudent:"Add New Student",upload:"Upload File",importStudents:"Import Students Data",edit:"Edit Student Info",assignSubjects:"Assign Courses",massAssignCourses:"Assign Courses To Students"};Ye(()=>{ee(),pe(),K.get("/api/classes",{onSuccess:a=>{t(5,u=a.data.flatMap(I=>[{placeholder:I.class_name,value:I.id}]))}})});const ee=()=>{K.get("/api/students?fullDetails=1",{onSuccess:a=>{t(11,$=a.data)}})},pe=()=>{K.get("/api/subjects",{onSuccess:a=>{t(9,g=a.data)}})},ne=()=>{t(3,o=!0),K.post("/api/student/create",{profilePic:y,classId:k.value,firstName:c.value,surname:f.value,studentCode:p.studentCode},{onSuccess:a=>{ee(),X(),t(3,o=!1)},onError:a=>{t(3,o=!1)}})},z=a=>{t(17,p.id=a.studentId,p),t(17,p.firstName=a.firstName,p),t(17,p.surname=a.surname,p),t(17,p.classId=a.classId,p),t(17,p.class=a.class,p),t(17,p.photo=a.photo,p),t(17,p.studentCode=a.studentCode,p),t(2,y=a.photo),G(T.edit)},re=()=>{t(3,o=!0),K.post(`/api/student/update/${p.id}`,{profilePic:y,classId:k.value,firstName:c.value,surname:f.value,studentCode:p.studentCode},{onSuccess:a=>{ee(),X(),t(3,o=!1)},onError:a=>{t(3,o=!1)}})},w=()=>{if(o)return;t(3,o=!0);let a=new FormData;a.append("file",R.uploadFile),K.postFormWithToken("/api/student/upload",a,{onSuccess:I=>{M=I.data.key,t(15,Z=I.data.headings),G(T.importStudents),setTimeout(()=>t(3,o=!1),2e3)},onError:()=>{setTimeout(()=>t(3,o=!1),2e3)}})},O=a=>{if(o)return;t(3,o=!0);let I=new FormData;_&&I.append("file",_[0]),I.append("importKey",M),I.append("mappings",JSON.stringify(a.detail)),K.postFormWithToken("/api/student/import",I,{onSuccess:H=>{ee(),X(),t(16,P=JSON.parse(B)),t(3,o=!1)},onError:H=>{t(3,o=!1)}})},oe=()=>{K.downloadExcel("/api/students/download",{},{onSuccess:a=>{const I=window.URL.createObjectURL(new Blob([a.data])),H=document.createElement("a");H.href=I,H.setAttribute("download","STUDENT_DATA.xlsx"),document.body.appendChild(H),H.click()}})},G=a=>{t(1,C=a),C===T.addNewStudent&&t(12,j=T.addNewStudent),C===T.edit&&t(12,j=T.edit),C===T.assignSubjects&&t(12,j=T.assignSubjects),C===T.massAssignCourses&&t(12,j=T.massAssignCourses),C===T.upload&&t(12,j=T.upload),C===T.importStudents&&t(12,j=T.importStudents),t(13,L=!0)},X=()=>{t(13,L=!1),t(37,h=[]),q()},x=a=>{t(17,p.id=$[a].studentId,p),K.get("/api/student/assigned-subjects/"+p.id,{onSuccess:I=>{t(37,h=I.data)}}),G(T.assignSubjects)},se=()=>{t(3,o=!0);let a=h.flatMap(I=>[I.subjectId]);K.postWithToken("/api/students/mass-assign-subjects",{students:U,subjects:a},{onSuccess:I=>{t(37,h=[]),t(38,U=[]),t(4,r=!1),X(),t(3,o=!1)},onError:I=>{t(3,o=!1)}})},le=a=>{if(s(a.subjectId)){t(37,h=h.filter(I=>I.subjectId!=a.subjectId));return}h.push(a),t(37,h)},Te=()=>{t(3,o=!0);let a=h.flatMap(I=>[I.subjectId]);K.post(`/api/student/assign-subjects/${p.id}`,{subjects:a},{onSuccess:I=>{X(),t(3,o=!1)},onError:I=>{t(3,o=!1)}})},me=a=>{t(38,U=U.filter(I=>a!=I))},ge=a=>{U.push(a),t(38,U)},ye=()=>{r?t(38,U=[]):t(38,U=$.flatMap(a=>[a.studentId])),t(4,r=!r)};function De(a){ue[a?"unshift":"push"](()=>{c=a,t(6,c)})}const Ee=a=>t(17,p.firstName=a.detail.input,p);function Fe(a){ue[a?"unshift":"push"](()=>{f=a,t(7,f)})}const Le=a=>t(17,p.surname=a.detail.input,p),Pe=a=>t(17,p.studentCode=a.detail.input,p);function Ue(a){ue[a?"unshift":"push"](()=>{k=a,t(8,k)})}const Me=a=>{t(17,p.classId=a.detail.value,p),t(17,p.class=a.detail.placeholder,p)};function Be(){v=this.files,t(0,v),t(2,y)}const Oe=a=>le(a);function Re(a){ue[a?"unshift":"push"](()=>{R=a,t(14,R)})}function qe(){_=this.files,t(10,_)}const Je=()=>G(T.addNewStudent),We=()=>G(T.upload),ze=()=>G(T.massAssignCourses),He=(a,I)=>{var H;return(H=I.target)!=null&&H.checked?ge(a.studentId):me(a.studentId)},Ke=a=>z(a),Ge=a=>x(a);return l.$$.update=()=>{if(l.$$.dirty[1]&64&&t(19,s=a=>h.some(I=>I.subjectId==a)),l.$$.dirty[0]&5&&v&&v[0]){t(0,v=v[0]);let a=document.getElementById("preview"),I=new FileReader;I.onload=function(H){a.setAttribute("src",H.target.result),a.style.display="flex",t(2,y=a.getAttribute("src")),t(17,p.photo=y,p)},I.readAsDataURL(v)}l.$$.dirty[0]&2|l.$$.dirty[1]&64&&t(3,o=C===T.assignSubjects&&h.length===0),l.$$.dirty[1]&128&&t(18,n=a=>U.some(I=>I==a))},[v,C,y,o,r,u,c,f,k,g,_,$,j,L,R,Z,P,p,n,s,i,T,ne,z,re,w,O,oe,G,X,x,se,le,Te,me,ge,ye,h,U,De,Ee,Fe,Le,Pe,Ue,Me,Be,Oe,Re,qe,Je,We,ze,He,Ke,Ge]}class Jt extends Qe{constructor(e){super(),Ve(this,e,$t,wt,Xe,{},null,[-1,-1,-1])}}export{Jt as default};
