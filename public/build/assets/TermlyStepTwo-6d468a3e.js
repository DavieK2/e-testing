import{S as Q,i as R,s as V,w as U,f,g as B,c as q,h as o,j as G,k as a,m as L,C as J,t as A,B as X,a as I,l as K,d as M,D as Y,b as Z,o as ee,n as se,q as te,y as le,p as re}from"./app-6d9f305e.js";import ne from"./button-8a7fdb21.js";import O from"./icons-c5a046aa.js";import{r as W}from"./util-f704b04e.js";import"./utils-4fba9a6a.js";import"./tw-merge-0f2443f8.js";function z(e,c,l){const n=e.slice();return n[11]=c[l],n}function F(e){let c,l,n,p,$,u,d,i,y=e[11].class_name+"",k,b,v,S,s,_,x;n=new O({props:{icon:"check",className:`${e[3](e[11].class_code)?"stroke-green-700":"stroke-gray-300"}`}});function T(){return e[9](e[11])}return{c(){c=f("div"),l=f("button"),q(n.$$.fragment),$=B(),u=f("div"),d=f("button"),i=f("span"),k=se(y),S=B(),o(l,"class",p=`flex items-center shrink-0 justify-center h-12 w-12 border-2 ${e[3](e[11].class_code)?"border-green-700":"border-gray-300"} rounded-lg`),o(i,"class",b=`${e[3](e[11].class_code)?"text-green-700":"text-gray-400"}`),o(d,"type","button"),o(d,"class",v=`flex p-3 border-2 ${e[3](e[11].class_code)?"border-green-700":"border-gray-300"}  w-full rounded-lg items-center justify-between space-x-2`),o(u,"class","w-full"),o(c,"class","flex space-x-2 items-center w-full")},m(w,h){G(w,c,h),a(c,l),L(n,l,null),a(c,$),a(c,u),a(u,d),a(d,i),a(i,k),a(c,S),s=!0,_||(x=J(l,"click",T),_=!0)},p(w,h){e=w;const N={};h&9&&(N.className=`${e[3](e[11].class_code)?"stroke-green-700":"stroke-gray-300"}`),n.$set(N),(!s||h&9&&p!==(p=`flex items-center shrink-0 justify-center h-12 w-12 border-2 ${e[3](e[11].class_code)?"border-green-700":"border-gray-300"} rounded-lg`))&&o(l,"class",p),(!s||h&1)&&y!==(y=e[11].class_name+"")&&te(k,y),(!s||h&9&&b!==(b=`${e[3](e[11].class_code)?"text-green-700":"text-gray-400"}`))&&o(i,"class",b),(!s||h&9&&v!==(v=`flex p-3 border-2 ${e[3](e[11].class_code)?"border-green-700":"border-gray-300"}  w-full rounded-lg items-center justify-between space-x-2`))&&o(d,"class",v)},i(w){s||(A(n.$$.fragment,w),s=!0)},o(w){I(n.$$.fragment,w),s=!1},d(w){w&&K(c),M(n),_=!1,x()}}}function ae(e){let c,l,n,p,$,u,d,i,y,k,b,v,S,s,_,x,T,w,h,N,D;i=new ne({props:{disabled:e[2],buttonText:e[4]?"Update & Continue":"Save & Continue",className:"px-6 min-w-max"}}),i.$on("click",e[6]),x=new O({props:{icon:"check",className:`${e[1]?"stroke-green-700":"stroke-gray-300"}`}});let C=U(e[0]),r=[];for(let t=0;t<C.length;t+=1)r[t]=F(z(e,C,t));const P=t=>I(r[t],1,1,()=>{r[t]=null});return{c(){c=f("div"),l=f("div"),n=f("div"),p=f("div"),$=f("div"),$.innerHTML='<div class="text-xl font-medium min-w-max text-gray-700">Assessment Levels</div> <div class="text-gray-400 text-sm">Select the levels to be assessed below</div>',u=B(),d=f("div"),q(i.$$.fragment),y=B(),k=f("div"),b=f("div"),v=f("span"),v.textContent="Select levels to be assessed",S=B(),s=f("div"),_=f("button"),q(x.$$.fragment),w=B();for(let t=0;t<r.length;t+=1)r[t].c();o(d,"class","ml-72 pt-4 max-w-3xl"),o(p,"class","flex items-center justify-between my-2 border-b border-gray-50 pb-8"),o(v,"class","flex-shrink-0 w-[18rem] text-gray-700"),o(_,"class",T=`flex items-center shrink-0 justify-center h-12 w-12 border-2 ${e[1]?"border-green-700":"border-gray-300"} rounded-lg`),o(s,"class","w-full space-y-3"),o(b,"class","flex w-full text-sm max-w-4xl"),o(k,"class","my-12 space-y-3 w-full"),o(n,"class","mx-auto max-w-4xl"),o(l,"class","shadow bg-white px-8 py-12 rounded-lg w-full"),o(c,"class","container my-12 space-x-10")},m(t,m){G(t,c,m),a(c,l),a(l,n),a(n,p),a(p,$),a(p,u),a(p,d),L(i,d,null),a(n,y),a(n,k),a(k,b),a(b,v),a(b,S),a(b,s),a(s,_),L(x,_,null),a(s,w);for(let j=0;j<r.length;j+=1)r[j]&&r[j].m(s,null);h=!0,N||(D=J(_,"click",e[7]),N=!0)},p(t,[m]){const j={};m&4&&(j.disabled=t[2]),i.$set(j);const E={};if(m&2&&(E.className=`${t[1]?"stroke-green-700":"stroke-gray-300"}`),x.$set(E),(!h||m&2&&T!==(T=`flex items-center shrink-0 justify-center h-12 w-12 border-2 ${t[1]?"border-green-700":"border-gray-300"} rounded-lg`))&&o(_,"class",T),m&41){C=U(t[0]);let g;for(g=0;g<C.length;g+=1){const H=z(t,C,g);r[g]?(r[g].p(H,m),A(r[g],1)):(r[g]=F(H),r[g].c(),A(r[g],1),r[g].m(s,null))}for(le(),g=C.length;g<r.length;g+=1)P(g);X()}},i(t){if(!h){A(i.$$.fragment,t),A(x.$$.fragment,t);for(let m=0;m<C.length;m+=1)A(r[m]);h=!0}},o(t){I(i.$$.fragment,t),I(x.$$.fragment,t),r=r.filter(Boolean);for(let m=0;m<r.length;m+=1)I(r[m]);h=!1},d(t){t&&K(c),M(i),M(x),Y(r,t),N=!1,D()}}}function oe(e,c,l){let n,p;Z(e,re,s=>l(10,p=s));let $=[],u=[],d=p.props.assessmentId,i=!1,y=!1;ee(()=>{console.log(d),W.getWithToken("/api/classes",{onSuccess:s=>{l(0,$=s.data)}}),W.getWithToken("/api/assessment-classes/"+d,{onSuccess:s=>{l(8,u=s.data)}})});const k=s=>{if(n(s.class_code)){l(8,u=u.filter(_=>_.class_code!=s.class_code));return}u.push(s),l(8,u)},b=()=>{l(2,y=!0),W.postWithToken("/api/assessment/assign-classes",{assessmentId:d,classes:u,step:"add_classes"},{onSuccess:s=>{W.navigateTo("/assessments/termly/schedule/"+d)},onError:s=>{l(2,y=!1)}})},v=()=>{i?(l(1,i=!1),l(8,u=[])):(l(1,i=!0),l(8,u=$))},S=s=>k(s);return e.$$.update=()=>{e.$$.dirty&256&&l(3,n=s=>u.some(_=>_.class_code==s))},[$,i,y,n,d,k,b,v,u,S]}class ge extends Q{constructor(c){super(),R(this,c,oe,ae,V,{})}}export{ge as default};
